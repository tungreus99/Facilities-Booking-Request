(self.webpackChunkangular=self.webpackChunkangular||[]).push([[504],{51504:function(e,t,o){"use strict";o.r(t),o.d(t,{AccountModule:function(){return Z}});var n,r=o(88084),c=o(61116),u=o(31041),a=o(42693),i=o(75470),s=o(63337),l=o(2479),p=o(30007),f=o(93820),g=o(53207),m=o(78828),h=o(84369),d=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),v=function(e){function t(t,o,n,r,c){var u=e.call(this,t)||this;return u.authService=o,u.authenService=n,u.googleAuthService=r,u.router=c,u.submitting=!1,u.processLogin=!1,u}return d(t,e),t.prototype.ngOnInit=function(){var e=this;this.googleAuthService.authState.subscribe(function(t){e.user=t,e.loggedIn=null!=t,e.loggedIn&&e.processLogin&&e.authenticateGoogle(e.user)})},t.prototype.login=function(){var e=this;this.authenService.login().subscribe(function(t){e.router.navigate("ROLE_STUDENT"==t.role||"ROLE_ADMIN"==t.role?["app/home"]:["app/manage-request"]),e.authenService.userRole=t.role,e.authenService.userId=t.id,e.authenService.clubMember=t.clubmember,e.authenService.setToken(t.jwtToken),e.authenService.requestTypeStatus=t.requestTypeStatus,localStorage.setItem("userName",t.userName),localStorage.setItem("userToken",t.jwtToken),localStorage.setItem("userId",t.id),localStorage.setItem("requestTypeStatus",t.requestTypeStatus),localStorage.setItem("clubMember",t.clubmember),localStorage.setItem("userRole",t.role),localStorage.setItem("accountName",t.fullName),e.processLogin=!1},function(){e.router.navigate(["account/login"])})},t.prototype.signInWithGoogle=function(){this.processLogin=!0,this.googleAuthService.signIn(r.tV.PROVIDER_ID)},t.prototype.authenticateGoogle=function(e,t){var o=this;t=t||function(){},this.authenService.account.email=e.email,this.authenService.account.passWord="",this.authenService.account.fullName=e.name,this.authenService.login().subscribe(function(e){o.router.navigate("ROLE_STUDENT"==e.role?["app/home"]:"ROLE_ADMIN"==e.role?["app/admin"]:"ROLE_SRO"==e.role?["app/SRO"]:["app/manage-request"]),o.authenService.userRole=e.role,o.authenService.userId=e.id,o.authenService.clubMember=e.clubmember,o.authenService.setToken(e.jwtToken),o.authenService.requestTypeStatus=e.requestTypeStatus,localStorage.setItem("userName",e.userName),localStorage.setItem("userToken",e.jwtToken),localStorage.setItem("userId",e.id),localStorage.setItem("requestTypeStatus",e.requestTypeStatus),localStorage.setItem("clubMember",e.clubmember),localStorage.setItem("userRole",e.role),localStorage.setItem("accountName",e.fullName),o.processLogin=!1},function(){o.router.navigate(["account/login"])})},t.\u0275fac=function(e){return new(e||t)(f.Y36(f.zs3),f.Y36(g.K),f.Y36(m.i),f.Y36(r.xE),f.Y36(s.F0))},t.\u0275cmp=f.Xpm({type:t,selectors:[["ng-component"]],features:[f.qOj],decls:8,vars:2,consts:[[1,"text-center","mb-3"],["novalidate","","autocomplete","off",3,"ngSubmit"],["loginForm","ngForm"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","text-center",2,"margin-top","25px"],["mat-flat-button","","type","button","color","primary",2,"width","100%",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div"),f.TgZ(1,"h3",0),f._uU(2),f.qZA(),f.TgZ(3,"form",1,2),f.NdJ("ngSubmit",function(){return t.login()}),f.TgZ(5,"div",3),f.TgZ(6,"button",4),f.NdJ("click",function(){return t.signInWithGoogle()}),f._uU(7," Log In With Google "),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.Q6J("@routerTransition",void 0),f.xp6(2),f.Oqu("Log In"))},directives:[u._Y,u.JL,u.F,h.lW],encapsulation:2,data:{animation:[(0,p.RP)()]}}),t}(l.c),S=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["account-header"]],decls:4,vars:0,consts:[[1,"login-logo"],["href","/"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"a",1),f.TgZ(2,"b"),f._uU(3,"Capstone Management"),f.qZA(),f.qZA(),f.qZA())},encapsulation:2,changeDetection:0}),e}(),y=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),b=function(e){function t(t){var o=e.call(this,t)||this;return o.currentYear=1,o.versionText="",o}return y(t,e),t.\u0275fac=function(e){return new(e||t)(f.Y36(f.zs3))},t.\u0275cmp=f.Xpm({type:t,selectors:[["account-footer"]],features:[f.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),t}(l.c),_=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();function T(e,t){1&e&&f._UZ(0,"div",5)}var I=function(e){function t(t,o){var n=e.call(this,t)||this;return n.renderer=o,n}return _(t,e),t.prototype.showTenantChange=function(){return abp.multiTenancy.isEnabled},t.prototype.ngOnInit=function(){this.renderer.addClass(document.body,"login-page")},t.\u0275fac=function(e){return new(e||t)(f.Y36(f.zs3),f.Y36(f.Qsj))},t.\u0275cmp=f.Xpm({type:t,selectors:[["ng-component"]],features:[f.qOj],decls:8,vars:1,consts:[[1,"login-box",2,"width","450px"],[1,"card","p-2",2,"border-radius","3px"],["class","card-header",4,"ngIf"],[1,"card-body","login-card-body"],[1,"card-footer"],[1,"card-header"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f._UZ(1,"account-header"),f.TgZ(2,"div",1),f.YNc(3,T,1,0,"div",2),f.TgZ(4,"div",3),f._UZ(5,"router-outlet"),f.qZA(),f._UZ(6,"div",4),f.qZA(),f._UZ(7,"account-footer"),f.qZA()),2&e&&(f.xp6(3),f.Q6J("ngIf",t.showTenantChange()))},directives:[S,c.O5,s.lC,b],encapsulation:2}),t}(l.c),O=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[s.Bz.forChild([{path:"",component:I,children:[{path:"login",component:v}]}])],s.Bz]}),e}(),w=o(83711),Z=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!0,providers:[{id:r.tV.PROVIDER_ID,provider:new r.tV("879411761479-734qv2e2efi9f68utvo8catolkcfbe47.apps.googleusercontent.com")}]}}],imports:[[c.ez,u.u5,a.JF,a.Ed,w.m,O,i.zk.forChild(),r.RB]]}),e}()}}]);